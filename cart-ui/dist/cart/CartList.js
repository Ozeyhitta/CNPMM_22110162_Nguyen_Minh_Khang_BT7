import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { CartItemCard } from "./CartItemCard";
import { Button, Card } from "../ui";
const LoadingSkeleton = () => (_jsx("div", { className: "space-y-4", children: [1, 2, 3].map((i) => (_jsx(Card, { className: "p-4 animate-pulse", children: _jsxs("div", { className: "flex gap-4", children: [_jsx("div", { className: "w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0" }), _jsxs("div", { className: "flex-1 space-y-2", children: [_jsx("div", { className: "h-4 bg-gray-200 rounded w-3/4" }), _jsx("div", { className: "h-3 bg-gray-200 rounded w-1/2" }), _jsx("div", { className: "h-3 bg-gray-200 rounded w-1/4" })] }), _jsx("div", { className: "w-20 h-8 bg-gray-200 rounded" })] }) }, i))) }));
const EmptyCart = ({ onBrowseProducts, }) => (_jsx(Card, { className: "p-8 text-center", variant: "elevated", children: _jsxs("div", { className: "space-y-4", children: [_jsx("div", { className: "text-6xl", children: "\uD83D\uDED2" }), _jsxs("div", { children: [_jsx("h3", { className: "text-xl font-semibold text-gray-900 mb-2", children: "Gi\u1ECF h\u00E0ng c\u1EE7a b\u1EA1n \u0111ang tr\u1ED1ng" }), _jsx("p", { className: "text-gray-600", children: "H\u00E3y th\u00EAm m\u1ED9t s\u1ED1 s\u1EA3n ph\u1EA9m v\u00E0o gi\u1ECF h\u00E0ng \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u mua s\u1EAFm!" })] }), onBrowseProducts && (_jsx(Button, { onClick: onBrowseProducts, variant: "primary", children: "Ti\u1EBFp t\u1EE5c mua s\u1EAFm" }))] }) }));
const CartSummary = ({ items, onCheckout, loading }) => {
    const subtotal = items.reduce((sum, item) => sum + item.product.price * item.quantity, 0);
    const shipping = subtotal > 500000 ? 0 : 30000; // Free shipping over 500k
    const tax = Math.round(subtotal * 0.08); // 8% tax
    const total = subtotal + shipping + tax;
    return (_jsxs(Card, { className: "p-6", variant: "elevated", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-4", children: "T\u00F3m t\u1EAFt \u0111\u01A1n h\u00E0ng" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsxs("span", { className: "text-gray-600", children: ["T\u1EA1m t\u00EDnh (", items.length, " s\u1EA3n ph\u1EA9m)"] }), _jsxs("span", { className: "font-medium", children: [subtotal.toLocaleString(), "\u0111"] })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Ph\u00ED v\u1EADn chuy\u1EC3n" }), _jsx("span", { className: `font-medium ${shipping === 0 ? "text-green-600" : ""}`, children: shipping === 0 ? "Miễn phí" : `${shipping.toLocaleString()}đ` })] }), _jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Thu\u1EBF (8%)" }), _jsxs("span", { className: "font-medium", children: [tax.toLocaleString(), "\u0111"] })] }), _jsx("div", { className: "border-t border-gray-200 pt-3", children: _jsxs("div", { className: "flex justify-between text-lg font-bold", children: [_jsx("span", { children: "T\u1ED5ng c\u1ED9ng" }), _jsxs("span", { className: "text-blue-600", children: [total.toLocaleString(), "\u0111"] })] }) })] }), _jsxs("div", { className: "mt-6 space-y-3", children: [_jsx(Button, { fullWidth: true, size: "lg", onClick: onCheckout, disabled: loading || items.length === 0, loading: loading, children: "Thanh to\u00E1n" }), subtotal < 500000 && (_jsxs("p", { className: "text-xs text-gray-500 text-center", children: ["Mua th\u00EAm ", (500000 - subtotal).toLocaleString(), "\u0111 \u0111\u1EC3 \u0111\u01B0\u1EE3c mi\u1EC5n ph\u00ED v\u1EADn chuy\u1EC3n"] }))] })] }));
};
export const CartList = ({ cart, onUpdate, onRemove, onCheckout, loading = false, }) => {
    if (loading || !cart) {
        return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "flex items-center justify-center py-8", children: [_jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" }), _jsx("span", { className: "ml-2 text-gray-600", children: "\u0110ang t\u1EA3i gi\u1ECF h\u00E0ng..." })] }), _jsx(LoadingSkeleton, {})] }));
    }
    if (cart.items.length === 0) {
        return _jsx(EmptyCart, {});
    }
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "space-y-4", children: [_jsxs("h2", { className: "text-xl font-semibold text-gray-900", children: ["Gi\u1ECF h\u00E0ng (", cart.items.length, " s\u1EA3n ph\u1EA9m)"] }), cart.items.map((item) => (_jsx(CartItemCard, { item: item, onUpdate: onUpdate, onRemove: onRemove, loading: loading }, item.id)))] }), _jsx(CartSummary, { items: cart.items, onCheckout: onCheckout, loading: loading })] }));
};
